<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éšœå®³ãƒ¬ãƒ¼ã‚¹ãƒ»ã‚¿ã‚¤ãƒ æ¯”è¨ˆç®—æ©ŸPro</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; color: #333; }
        .container { max-width: 550px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { font-size: 1.4rem; text-align: center; color: #1b5e20; border-bottom: 3px solid #4caf50; padding-bottom: 10px; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9rem; color: #555; }
        select, input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 1rem; outline: none; }
        select:focus, input:focus { border-color: #4caf50; }
        .time-inputs { display: flex; gap: 10px; align-items: center; }
        button { width: 100%; padding: 15px; background: #2e7d32; color: white; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; margin-top: 10px; }
        button:hover { background: #1b5e20; }
        #result { margin-top: 20px; padding: 20px; border-radius: 10px; text-align: center; display: none; }
        .ratio { font-size: 2.5rem; font-weight: bold; margin: 5px 0; }
        .level-rank { font-size: 1.3rem; font-weight: bold; margin-bottom: 5px; }
        .record-info { font-size: 0.85rem; color: #666; background: #eee; padding: 10px; border-radius: 6px; margin-top: 10px; line-height: 1.4; }
        /* åˆ¤å®šè‰² */
        .rank-S { background: #ffebee; color: #c62828; border: 2px solid #ef9a9a; }
        .rank-A { background: #fff3e0; color: #ef6c00; border: 2px solid #ffcc80; }
        .rank-B { background: #e8f5e9; color: #2e7d32; border: 2px solid #a5d6a7; }
        .rank-C { background: #f5f5f5; color: #616161; border: 2px solid #bdbdbd; }
    </style>
</head>
<body>

<div class="container">
    <h1>éšœå®³ã‚¿ã‚¤ãƒ æ¯” è¨ˆç®—æ©Ÿ</h1>
    
    <div class="form-group">
        <label>ç«¶é¦¬å ´</label>
        <select id="venueSelect" onchange="updateDistanceOptions()">
            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
            </select>
    </div>

    <div class="form-group">
        <label>ã‚³ãƒ¼ã‚¹ / è·é›¢</label>
        <select id="distanceSelect" onchange="showRecordInfo()">
            <option value="">å…ˆã«ç«¶é¦¬å ´ã‚’é¸ã‚“ã§ãã ã•ã„</option>
        </select>
    </div>

    <div id="recordDisplay" class="record-info" style="display:none;"></div>

    <div class="form-group" style="margin-top:20px;">
        <label>èµ°ç ´ã‚¿ã‚¤ãƒ </label>
        <div class="time-inputs">
            <input type="number" id="min" placeholder="åˆ†"> <span>:</span>
            <input type="number" id="sec" placeholder="ç§’" step="0.1">
        </div>
    </div>

    <button onclick="calculate()">ãƒ¬ãƒ™ãƒ«ã‚’åˆ¤å®šã™ã‚‹</button>

    <div id="result">
        <div>ãƒ¬ã‚³ãƒ¼ãƒ‰æ¯”</div>
        <div class="ratio" id="resRatio">-- %</div>
        <div class="level-rank" id="resRank">--</div>
        <div id="resComment" style="font-size: 0.9rem;"></div>
    </div>
</div>

<script>
// --- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹éƒ¨åˆ†: ã“ã“ã‚’è‡ªç”±ã«ç·¨é›†ã—ã¦ã‚³ãƒ¼ã‚¹ã‚’è¿½åŠ ã§ãã¾ã™ ---
const recordDB = {
    "ä¸­å±±": [
        { dist: "èŠ3100m", time: 184.2, date: "2018/04/14", horse: "ã‚ªã‚¸ãƒ¥ã‚¦ãƒãƒ§ã‚¦ã‚µãƒ³" },
        { dist: "èŠ4100m", time: 281.0, date: "1968/12/15", horse: "ãƒ•ã‚¸ãƒã‚ªãƒ¼(å‚è€ƒ)" },
        { dist: "èŠ4250m", time: 252.3, date: "2024/04/13", horse: "ã‚¤ãƒ­ã‚´ãƒˆã‚·" }
    ],
    "æ±äº¬": [
        { dist: "èŠ3000m", time: 194.3, date: "2013/06/22", horse: "ã‚¢ãƒãƒ­ãƒãƒ¼ãƒ™ãƒªãƒƒã‚¯" },
        { dist: "èŠ3110m", time: 201.1, date: "2020/10/18", horse: "ãƒ•ã‚©ã‚¤ãƒ¤ãƒ¼ãƒ´ã‚§ãƒ«ã‚¯" },
        { dist: "èŠ3300m", time: 193.3, date: "2021/06/26", horse: "ãƒ©ãƒ´ã‚¢ãƒ³ãƒ‰ãƒãƒƒãƒ—" }
    ],
    "å°å€‰": [
        { dist: "èŠ2860m", time: 181.1, date: "2023/02/11", horse: "ãƒ†ãƒ¼ã‚ªãƒ¼ã‚½ã‚¯ãƒ©ãƒ†ã‚¹" },
        { dist: "èŠ2900m", time: 184.1, date: "2021/02/06", horse: "ã‚·ãƒ§ã‚¦ãƒŠãƒ³ã‚¢ãƒ¼ãƒãƒ¼" },
        { dist: "èŠ3390m", time: 220.2, date: "2022/08/27", horse: "ã‚¸ã‚§ãƒŸãƒ‹ã‚­ãƒ³ã‚°" }
    ],
    "ç¦å³¶": [
        { dist: "èŠ2750m", time: 188.1, date: "2022/11/05", horse: "ãƒ†ãƒ¼ã‚ªãƒ¼ã‚½ã‚¯ãƒ©ãƒ†ã‚¹" },
        { dist: "èŠ2770m", time: 191.1, date: "2023/04/08", horse: "ãƒ€ã‚¤ã‚·ãƒ³ã‚¯ãƒ­ãƒ¼ãƒãƒ¼" },
        { dist: "èŠ3350m", time: 224.2, date: "2024/07/20", horse: "ã‚µã‚¯ã‚»ã‚¹ã‚¨ãƒ¼ã‚¹" },
        { dist: "èŠ3380m", time: 224.6, date: "2022/07/23", horse: "ãƒ›ãƒƒã‚³ãƒ¼ãƒ¡ãƒ´ã‚£ã‚¦ã‚¹" }
    ],
    "æ–°æ½Ÿ": [
        { dist: "èŠ2850m", time: 172.1, date: "2024/07/27", horse: "ã‚µã‚¯ã‚»ã‚¹ã‚¨ãƒ¼ã‚¹" },
        { dist: "èŠ2890m", time: 175.7, date: "2021/07/31", horse: "ãƒˆã‚¥ãƒ«ãƒœãƒ¼" },
        { dist: "èŠ3250m", time: 198.8, date: "2024/05/18", horse: "ã‚µãƒšãƒ©ãƒ´ã‚£" },
        { dist: "èŠ3280m", time: 201.2, date: "2023/10/15", horse: "ã‚µãƒšãƒ©ãƒ´ã‚£" }
    ]
    // é˜ªç¥ãƒ»äº¬éƒ½ãƒ»ä¸­äº¬ãªã©ã‚‚åŒæ§˜ã®å½¢å¼ã§è¿½åŠ å¯èƒ½
};

// --- åˆæœŸåŒ–å‡¦ç† ---
const venueSelect = document.getElementById('venueSelect');
for (let venue in recordDB) {
    let opt = document.createElement('option');
    opt.value = venue;
    opt.innerText = venue;
    venueSelect.appendChild(opt);
}

// ç«¶é¦¬å ´ãŒé¸ã°ã‚ŒãŸã‚‰è·é›¢ä¸€è¦§ã‚’æ›´æ–°
function updateDistanceOptions() {
    const venue = venueSelect.value;
    const distSelect = document.getElementById('distanceSelect');
    distSelect.innerHTML = '<option value="">è·é›¢ã‚’é¸æŠ</option>';
    document.getElementById('recordDisplay').style.display = 'none';

    if (venue && recordDB[venue]) {
        recordDB[venue].forEach((data, index) => {
            let opt = document.createElement('option');
            opt.value = index;
            opt.innerText = data.dist;
            distSelect.appendChild(opt);
        });
    }
}

// ãƒ¬ã‚³ãƒ¼ãƒ‰æƒ…å ±ã‚’è¡¨ç¤º
function showRecordInfo() {
    const venue = venueSelect.value;
    const index = document.getElementById('distanceSelect').value;
    const display = document.getElementById('recordDisplay');

    if (venue !== "" && index !== "") {
        const data = recordDB[venue][index];
        display.innerHTML = `ğŸ <b>ãƒ¬ã‚³ãƒ¼ãƒ‰: ${Math.floor(data.time/60)}åˆ†${(data.time%60).toFixed(1)}ç§’</b><br>
                             ğŸ‘¤ ä¿æŒé¦¬: ${data.horse}<br>
                             ğŸ“… è¨˜éŒ²æ—¥: ${data.date}`;
        display.style.display = 'block';
    } else {
        display.style.display = 'none';
    }
}

function calculate() {
    const venue = venueSelect.value;
    const index = document.getElementById('distanceSelect').value;
    if (!venue || index === "") return alert("ã‚³ãƒ¼ã‚¹ã‚’é¸æŠã—ã¦ãã ã•ã„");

    const record = recordDB[venue][index].time;
    const min = parseFloat(document.getElementById('min').value) || 0;
    const sec = parseFloat(document.getElementById('sec').value) || 0;
    const targetTime = (min * 60) + sec;

    if (targetTime === 0) return alert("ã‚¿ã‚¤ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");

    const ratio = (targetTime / record) * 100;
    const resDiv = document.getElementById('result');
    
    resDiv.style.display = 'block';
    document.getElementById('resRatio').innerText = ratio.toFixed(2) + ' %';

    resDiv.className = '';
    const r = document.getElementById('resRank');
    const c = document.getElementById('resComment');

    if (ratio < 101.5) {
        r.innerText = "ãƒ©ãƒ³ã‚¯Sï¼šç•°æ¬¡å…ƒ";
        c.innerText = "ãƒ¬ã‚³ãƒ¼ãƒ‰ã«è‚‰è–„ã™ã‚‹å‡„ã¾ã˜ã„æ™‚è¨ˆã§ã™ã€‚";
        resDiv.classList.add('rank-S');
    } else if (ratio < 103.0) {
        r.innerText = "ãƒ©ãƒ³ã‚¯Aï¼šå„ªç§€";
        c.innerText = "é«˜ã„ãƒ¬ãƒ™ãƒ«ã§å®‰å®šã—ãŸã‚¹ãƒ”ãƒ¼ãƒ‰ã‚’æŒã£ã¦ã„ã¾ã™ã€‚";
        resDiv.classList.add('rank-A');
    } else if (ratio < 104.5) {
        r.innerText = "ãƒ©ãƒ³ã‚¯Bï¼šæ¨™æº–";
        c.innerText = "ã“ã®ã‚¯ãƒ©ã‚¹ã®å¹³å‡çš„ãªæ±ºç€ã‚¿ã‚¤ãƒ ã§ã™ã€‚";
        resDiv.classList.add('rank-B');
    } else {
        r.innerText = "ãƒ©ãƒ³ã‚¯Cï¼šä½èª¿";
        c.innerText = "æ™‚è¨ˆã‚’è¦ã—ã¾ã—ãŸã€‚æ¬¡èµ°ã¯ç›¸æ‰‹é–¢ä¿‚ã«æ³¨ç›®ã€‚";
        resDiv.classList.add('rank-C');
    }
}
</script>
</body>
</html>
